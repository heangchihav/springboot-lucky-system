apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: demo

resources:
  # Base resources
  - base/namespace/namespace.yaml
  - base/secrets/secrets.yaml
  - base/config/configmap.yaml
  - base/config/postgres-init-configmap.yaml
  
  # Infrastructure - Database
  - infrastructure/database/postgres.yaml
  
  # Infrastructure - Cache
  - infrastructure/cache/redis.yaml
  
  # Infrastructure - Proxy & Ingress
  - infrastructure/proxy/nginx-configmap.yaml
  - infrastructure/proxy/nginx.yaml
  - infrastructure/proxy/ingress.yaml
  
  # Services - Backend
  - services/backend/user-service.yaml
  - services/backend/call-service.yaml
  - services/backend/delivery-service.yaml
  - services/backend/marketing-service.yaml
  
  # Services - Gateway
  - services/gateway/gateway.yaml
  
  # Cloudflare Tunnel
  - cloudflare/cloudflared-config.yaml
  - cloudflare/cloudflared-secret.yaml
  - cloudflare/cloudflared.yaml
